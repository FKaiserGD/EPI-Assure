<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=chrome">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Configure sua conta ou a forma no qual você utiliza o site. (Versão de Administrador)">
    <meta name="theme-color" content="#FFDE59"/>
    <link rel="stylesheet" href="../Assets/css/style.css">
    <link rel="stylesheet" href="../Assets/css/game.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="../Assets/images/AppIcons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="../Assets/images/AppIcons/apple-touch-icon.png" sizes="180x180" type="image/x-icon">
    <title>Ranking</title>
    <!-- Adicionando o DNS-prefetch -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <script src="../js/rotas.js"></script>
    <script>
        const selectElement = document.getElementById('selectFiltro');

        const selectedValue = localStorage.getItem('selectedValue');

        if (selectedValue) {
        selectElement.value = selectedValue;
        }

        selectElement.addEventListener('change', function() {
        const selectedOption = selectElement.value;
        localStorage.setItem('selectedValue', selectedOption);
        redirectToPage(selectedOption);
        });

        function redirectToPage(value) {
        const listaFuncionarios = document.getElementById('lista');
        const funcionarios = Array.from(listaFuncionarios.getElementsByClassName('funcionario'));

        if (value === 'crescente') {
            funcionarios.sort(function(a, b) {
            const pontosA = parseInt(a.querySelector('.pontos p').textContent);
            const pontosB = parseInt(b.querySelector('.pontos p').textContent);
            return pontosA - pontosB;
            });
        } else if (value === 'decrescente') {
            funcionarios.sort(function(a, b) {
            const pontosA = parseInt(a.querySelector('.pontos p').textContent);
            const pontosB = parseInt(b.querySelector('.pontos p').textContent);
            return pontosB - pontosA;
            });
        }

        listaFuncionarios.innerHTML = '';
        funcionarios.forEach(function(funcionario) {
            listaFuncionarios.appendChild(funcionario);
            listaFuncionarios.appendChild(document.createElement('hr'));
        });
        }

        let listaInicialFuncionarios = null;

        function init() {
        listaInicialFuncionarios = document.getElementById('lista').innerHTML;
        }

        function filtrarFuncionarios() {
        const inputPesquisa = document.getElementById('pesquisa').querySelector('input');
        const valorPesquisa = inputPesquisa.value.toLowerCase();

        const listaFuncionarios = document.getElementById('lista');
        const funcionarios = Array.from(listaFuncionarios.getElementsByClassName('funcionario'));

        // Se o campo de pesquisa estiver vazio, redefine a lista de funcionários para a lista inicial
        if (valorPesquisa === '') {
            listaFuncionarios.innerHTML = listaInicialFuncionarios;
        } else {
            // Filtrar os funcionários com base na pesquisa
            const funcionariosFiltrados = funcionarios.filter(function(funcionario) {
            const nomeFuncionario = funcionario.querySelector('.info-funcionario h4').textContent.toLowerCase();
            return nomeFuncionario.includes(valorPesquisa);
            });

            // Limpar a lista de funcionários existente
            listaFuncionarios.innerHTML = '';

            // Adicionar os funcionários filtrados de volta à lista
            funcionariosFiltrados.forEach(function(funcionario) {
            listaFuncionarios.appendChild(funcionario);
            listaFuncionarios.appendChild(document.createElement('hr'));
            });
        }
        }

        function limparFiltro() {
        const inputPesquisa = document.getElementById('pesquisa').querySelector('input');
        inputPesquisa.value = '';

        // Redefinir a lista de funcionários para a lista inicial
        const listaFuncionarios = document.getElementById('lista');
        listaFuncionarios.innerHTML = listaInicialFuncionarios;
        }

        document.getElementById('pesquisa').querySelector('i.fa-search').addEventListener('click', filtrarFuncionarios);
        document.getElementById('pesquisa').querySelector
    </script>
    
</head>

<body>
    <header>
        <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
        <h3>Nome do Administrador</h3>
        <img src="../Assets/images/Icones/helmet.webp" alt="adicionar EPI" id="icone-requer" onclick="admSolicitar()">
    </header>
    <main>
        <div id="titulo">
            <h2>Ranking do Mês</h2>
            <img src="../Assets/images/Icones/trofeu.webp" alt="icone-trofeu" id="icone-trofeu">
        </div>
        <div id="pesquisa">
            <div class="input-wrapper">
              <input type="text" placeholder="Pesquise um Funcionário">
              <div class="icon-wrapper">
                <i class="fa fa-search" onclick="filtrarFuncionarios()"></i>
                <i class="fa fa-refresh" onclick="limparFiltro()"></i>
              </div>
            </div>
        </div>                 
        <div id="filtro">
            <select onchange="redirectToPage(this.value)">
              <option value="decrescente" selected>Ordem Decrescente</option>
              <option value="crescente">Ordem Crescente</option>
            </select>
        </div>
        <div id="lista">
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Carlos</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>1000 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Ronaldo</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>800 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Nome do Funcionário</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>600 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Nome do Funcionário</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>400 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Nome do Funcionário</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>200 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Nome do Funcionário</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>100 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="funcionario">
                <img src="../Assets/images/Icones/usuario.webp" alt="imagem do usuário" id="imagem-user">
                <div class="info-funcionario">
                    <div class="pontos-funcionario">
                        <h4>Nome do Funcionário</h4>
                        <p>Cargo</p>
                    </div>
                    <div class="pontos">
                        <i class="fa fa-trophy fa-2x"></i>
                        <p>50 Pts</p>
                    </div>
                </div>
            </div>
            <hr>
        </div>
    </main>
    <footer>
        <ul>
            <div class="icone">
                <li><i class="fa fa-home fa-2x" onclick="admHome()"></i></li>
                <li class="nome-icone">Home</li>
            </div>
            <div class="icone">
                <li><i class="fa fa-address-book-o fa-2x" onclick="admCheck()"></i></li>
                <li class="nome-icone">Check</li>
            </div>
            <div class="icone">
                <li><i class="fa fa-gamepad fa-2x" style="color: #5A98FF;"></i></li>
                <li class="nome-icone">Rank</li>
            </div>
            <div class="icone">
                <li><i class="fa fa-cog fa-2x" onclick="admConfig()"></i></li>
                <li class="nome-icone">Config.</li>
            </div>
        </ul>
    </footer>
</body>

</html>